# Интеграция

##### 1. Выберите как минимум две спроектированные интеграции. Одна из них обязательно должна быть с HTTP / REST, другая с очередями.

![alt tag](https://github.com/reddeveI/sb-architecture/blob/main/images/Microservices-integration-types.jpg)


##### 2. Раскройте возможный сценарий возникновения ошибок и способ их обработки вашей системой.

- СМС сервис вычитывает сообщения из очереди и отправляет СМС. В какой-то момент сервис стал вычитывать из очереди сообщение с номером телефона с неизвестным ранее кодом страны. Те сообщения номер телефона которых сервис не может вычитать, он складывает в DeadLetterQueue и уведомляет администратора. Разработчик добавяет функцию обработки нового кода и система автоматически обрабатывает очередь сообщений упавших в ошибку ранее.

##### 3. В рамках одной интеграции примените более одного сценария повышения отказоустойчивости.

- Наша цель, чтобы мы сразу отправляли пользователю информацию о предварительной дате доставки. Но в случае если сервис доставки не доступен, чтобы не отменять заказ, мы отправляем сообщение в очередь и после того как сервис доставки стал доступен, вычитываем сообщения и оформляем доставку в рамках заказа.

##### 4. Используйте диаграмму последовательности, чтобы показать последовательность действий, которую надо сделать вашей системе при обработке ошибок.

![alt tag](https://github.com/reddeveI/sb-architecture/blob/main/images/Payment-error-handlers.png)


##### 5. Для REST API обновите swagger-файл и укажите появившиеся ошибки, которые возвращает ваш сервис (Swagger Editor).

[Обновлённая ссылка на OpenApi specification json](https://raw.githubusercontent.com/reddeveI/sb-architecture/main/files/openapi.json)
