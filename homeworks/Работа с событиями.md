## 9. Работа с событиями

### Подумайте, какие сервисы системы имеет смысл перевести на событийную модель работы. Всю систему или только отдельные сервисы? 

![alt tag](https://github.com/reddeveI/sb-architecture/blob/main/images/Microservices-patterns.jpg)

### Приведите бизнес-обоснование для сервисов, которые будут переведены на событийную модель. Каковы польза и риски такого решения? 

- Подготовить источник данных для аналитических систем
- В сервисе пользователей необходимо получать информацию о причинах и порядке изменения данных, чтобы оценить поведение пользователей

Польза:
- Чтение данных преобладает над записью, тогда можно получить серьёзный прирост производительности
- Бизнес-аналитики и маркетологи компании тоже стали просить больше данных для построения своих моделей: одним не хватает простых записей о заказах, другим недостаточно Google Аналитики для оценки поведения пользователей.

Риски:
- Может возникнуть ситуация, когда данные для записи не успели обновиться в моделях для чтения.
- Если сервис репликации откажет, то в базах для чтения может не оказаться информации о последних заказах


### Для выбранных в первом вопросе сервисов опишите основные агрегаты, их назначение и события/команды, которые они будут обрабатывать/генерировать.  

![alt tag](https://github.com/reddeveI/sb-architecture/blob/main/images/User-Order-Aggregates-2.jpg)

### Результат представьте в виде перечисления и описания агрегатов. Составьте диаграмму событий/команд, покажите их связь, то есть на какие события или команды реагируют агрегаты.

|Команды/События|Агрегат|
|-------|-----|
|CreateOrder|Order|
|AddAddress|Order|
|AddItem|Order|
|ChoosePaymentMethod|Order
|OrderCreated|User|
|PaymentCardSaved|User|
|UpdateFullName|User|

### На архитектурной диаграмме (общий план архитектуры с прошлых домашних заданий) отобразите необходимые технические компоненты для работы с командами и событиями. 

![alt tag](https://github.com/reddeveI/sb-architecture/blob/main/images/Order-servise-with-cqrs-3.jpg)
